# Auth & Admin Profile Module - Architecture Overview

## ğŸ—ï¸ Module Structure

```
Modules/Admin/
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â”œâ”€â”€ Controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ Auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginController.php          â”
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPasswordController.php â”‚ Auth Flows
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ResetPasswordController.php  â”˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileController.php            â”
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminsController.php             â”‚ Resource Controllers
â”‚   â”‚   â”‚   â”œâ”€â”€ LocaleController.php             â”‚
â”‚   â”‚   â”‚   â””â”€â”€ Controller.php                   â”˜
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ SetAdminLocale.php               â” Request Middleware
â”‚   â”‚   â”‚   â””â”€â”€ EnsureAdminGuard.php             â”˜
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Requests/
â”‚   â”‚       â”œâ”€â”€ Auth/
â”‚   â”‚       â”‚   â”œâ”€â”€ LoginRequest.php             â”
â”‚   â”‚       â”‚   â”œâ”€â”€ ForgotPasswordRequest.php    â”‚
â”‚   â”‚       â”‚   â””â”€â”€ ResetPasswordRequest.php     â”‚ Form Request
â”‚   â”‚       â”œâ”€â”€ ProfileUpdateRequest.php         â”‚ Validation Classes
â”‚   â”‚       â”œâ”€â”€ PasswordUpdateRequest.php        â”‚
â”‚   â”‚       â”œâ”€â”€ AdminStoreRequest.php            â”‚
â”‚   â”‚       â””â”€â”€ AdminUpdateRequest.php           â”˜
â”‚   â”‚
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â””â”€â”€ Admin.php                            Model (Eloquent)
â”‚   â”‚
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â”œâ”€â”€ AdminService.php                     â”
â”‚   â”‚   â”œâ”€â”€ ProfileService.php                   â”‚ Business Logic Layer
â”‚   â”‚   â””â”€â”€ LocaleService.php                    â”˜
â”‚   â”‚
â”‚   â””â”€â”€ Policies/
â”‚       â””â”€â”€ AdminPolicy.php                      Authorization (ACL)
â”‚
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ create_admins_table.php
â”‚   â”‚   â””â”€â”€ add_last_login_to_admins_table.php
â”‚   â”œâ”€â”€ seeders/
â”‚   â”‚   â””â”€â”€ AdminSeeder.php
â”‚   â””â”€â”€ factories/
â”‚       â””â”€â”€ AdminFactory.php
â”‚
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”‚   â”œâ”€â”€ app.blade.php                    Main authenticated layout
â”‚   â”‚   â”‚   â””â”€â”€ auth.blade.php                   Auth pages layout
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ login.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ forgot-password.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ reset-password.blade.php
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â”œâ”€â”€ show.blade.php
â”‚   â”‚   â”‚   â”œâ”€â”€ edit.blade.php
â”‚   â”‚   â”‚   â””â”€â”€ password.blade.php
â”‚   â”‚   â””â”€â”€ admins/
â”‚   â”‚       â”œâ”€â”€ index.blade.php
â”‚   â”‚       â”œâ”€â”€ create.blade.php
â”‚   â”‚       â””â”€â”€ edit.blade.php
â”‚   â”‚
â”‚   â””â”€â”€ lang/
â”‚       â”œâ”€â”€ ar/
â”‚       â”‚   â””â”€â”€ admin.php                        150+ Arabic translations
â”‚       â””â”€â”€ en/
â”‚           â””â”€â”€ admin.php                        150+ English translations
â”‚
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ web.php                                  20 routes (guest + auth)
â”‚
â””â”€â”€ AdminModuleServiceProvider.php               Service Provider (Bootstrap)
```

---

## ğŸ”„ REQUEST FLOW DIAGRAM

### Login Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User at Login  â”‚
â”‚  /admin/login   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ GET
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginController         â”‚
â”‚  @showLoginForm()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View: login.blade.php   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Form Submission (POST)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginController         â”‚
â”‚  @login()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Validate
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginRequest            â”‚
â”‚  (email, password)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Valid?
         â”œâ”€â”€â”€ NO â”€â”€â”
         â”‚         â–¼
         â”‚    Redirect with error
         â”‚
         â”œâ”€â”€â”€ YES â”€â”€â”
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Auth::guard('admin')     â”‚
         â”‚ @attempt()               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Success?
                  â”œâ”€â”€â”€ NO â”€â”€â”
                  â”‚         â–¼
                  â”‚    Redirect with error
                  â”‚
                  â”œâ”€â”€â”€ YES â”€â”€â”
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Admin @recordLogin()      â”‚
         â”‚ (update last_login_at)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Redirect to /admin/       â”‚
         â”‚ dashboard with success   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Profile Update Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin visits         â”‚
â”‚ /admin/profile/edit  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ GET (auth:admin guard)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Middleware:              â”‚
â”‚ Â· auth:admin (check)     â”‚
â”‚ Â· admin.locale (set)     â”‚
â”‚ Â· admin.guard (verify)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Pass
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProfileController        â”‚
â”‚ @edit()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ View: profile/edit.blade â”‚
â”‚ (Pre-filled form)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Form Submit (PUT)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProfileController        â”‚
â”‚ @update()                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Validate
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProfileUpdateRequest     â”‚
â”‚ (name, email, phone)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Valid?
          â”œâ”€â”€â”€ NO â”€â”€â”
          â”‚         â–¼
          â”‚    Return with errors
          â”‚
          â”œâ”€â”€â”€ YES â”€â”€â”
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ ProfileService           â”‚
         â”‚ @updateProfile()         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ Update in DB
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Admin model updated      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Redirect to profile show â”‚
         â”‚ with success message     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           admins table                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                 INT             â”‚
â”‚ name                    VARCHAR         â”‚
â”‚ email (UNIQUE)          VARCHAR         â”‚
â”‚ phone (nullable)        VARCHAR         â”‚
â”‚ password (bcrypted)     VARCHAR         â”‚
â”‚ is_super                BOOLEAN         â”‚
â”‚ status                  ENUM(2)         â”‚
â”‚ remember_token          VARCHAR         â”‚
â”‚ email_verified_at       TIMESTAMP       â”‚
â”‚ last_login_at           TIMESTAMP       â”‚
â”‚ created_at              TIMESTAMP       â”‚
â”‚ updated_at              TIMESTAMP       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    password_reset_tokens table          â”‚
â”‚       (Laravel default)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ email                   VARCHAR         â”‚
â”‚ token                   VARCHAR         â”‚
â”‚ created_at              TIMESTAMP       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authorization Matrix

```
                      Super Admin    Admin (Regular)    Guest
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ View any admin        âœ… YES           âŒ NO            âŒ NO    â”‚
â”‚ View own profile      âœ… YES           âœ… YES           âŒ NO    â”‚
â”‚ Create admin          âœ… YES           âŒ NO            âŒ NO    â”‚
â”‚ Update admin          âœ… YES           Self only        âŒ NO    â”‚
â”‚ Delete admin          âœ… YES           âŒ NO            âŒ NO    â”‚
â”‚ Deactivate admin      âœ… YES           âŒ NO            âŒ NO    â”‚
â”‚ Access /admin/*       âœ… YES           âœ… YES           âŒ NO    â”‚
â”‚ Change own password   âœ… YES           âœ… YES           âŒ NO    â”‚
â”‚ Access auth routes    âŒ NO            âŒ NO            âœ… YES   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Locale & Direction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Visits Route                 â”‚
â”‚ /admin/admins                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ Middleware
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SetAdminLocale Middleware         â”‚
â”‚                                   â”‚
â”‚ 1. Get locale from session        â”‚
â”‚    session('admin_locale')        â”‚
â”‚                                   â”‚
â”‚ 2. Default to 'ar' if empty       â”‚
â”‚                                   â”‚
â”‚ 3. Validate locale (ar|en)        â”‚
â”‚                                   â”‚
â”‚ 4. Set app locale                 â”‚
â”‚    app()->setLocale('ar')         â”‚
â”‚                                   â”‚
â”‚ 5. Store in session for next req  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ Pass to View
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Blade Template                    â”‚
â”‚ (e.g. admins/index.blade.php)     â”‚
â”‚                                   â”‚
â”‚ Dir Attribute:                    â”‚
â”‚ dir="{{ 'ar' ? 'rtl' : 'ltr' }}" â”‚
â”‚                                   â”‚
â”‚ Translation:                      â”‚
â”‚ {{ __('admin.manage_admins') }}   â”‚
â”‚                                   â”‚
â”‚ Conditional Classes:              â”‚
â”‚ {{ session('ar') ? 'mr-4':'ml-4'}}â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Clicks Language Button       â”‚
â”‚ "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" | "English"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ Click
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Route: /admin/locale/{locale}     â”‚
â”‚ LocaleController@switch()         â”‚
â”‚                                   â”‚
â”‚ 1. Validate locale (ar|en)        â”‚
â”‚ 2. Store in session               â”‚
â”‚ 3. Set app()->setLocale()         â”‚
â”‚ 4. Redirect back to same page     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page Reloads in New Language      â”‚
â”‚ (RTL/LTR updated automatically)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Service Layer Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            HTTP Controllers                â”‚
â”‚  (Handle requests, validate input)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼              â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Profile â”‚  â”‚  Admin   â”‚  â”‚ Locale â”‚
    â”‚Service  â”‚  â”‚ Service  â”‚  â”‚Service â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚              â”‚          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        Eloquent Models             â”‚
    â”‚        (Database interactions)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       MySQL Database               â”‚
    â”‚    (admins table, etc)             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Middleware Chain

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Guest Route (e.g. /admin/login)         â”‚
â”‚                                         â”‚
â”‚ Middleware: none                        â”‚
â”‚ (or 'guest:admin')                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

vs.

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auth Route (e.g. /admin/profile)        â”‚
â”‚                                         â”‚
â”‚ Middleware Chain:                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 1. auth:admin                      â”‚  â”‚
â”‚ â”‚    (Check authenticated via admin) â”‚  â”‚
â”‚ â”‚    â†’ Redirect to login if not      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 2. admin.locale                    â”‚  â”‚
â”‚ â”‚    (Set locale from session)       â”‚  â”‚
â”‚ â”‚    â†’ Default to 'ar'               â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 3. admin.guard                     â”‚  â”‚
â”‚ â”‚    (Verify admin is active)        â”‚  â”‚
â”‚ â”‚    â†’ Logout if inactive            â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚   Route Handler (Controller)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Route Groups

```
/admin/
â”œâ”€â”€ [GUEST: no auth needed]
â”‚   â”œâ”€â”€ GET /login â†’ LoginController@showLoginForm
â”‚   â”œâ”€â”€ POST /login â†’ LoginController@login
â”‚   â”œâ”€â”€ GET /password/forgot â†’ ForgotPasswordController@show
â”‚   â”œâ”€â”€ POST /password/email â†’ ForgotPasswordController@send
â”‚   â”œâ”€â”€ GET /password/reset/{token} â†’ ResetPasswordController@show
â”‚   â””â”€â”€ POST /password/update â†’ ResetPasswordController@update
â”‚
â””â”€â”€ [AUTH: requires admin guard + middleware]
    â”œâ”€â”€ [Locale]
    â”‚   â””â”€â”€ GET /locale/{locale} â†’ LocaleController@switch
    â”‚
    â”œâ”€â”€ [Profile]
    â”‚   â”œâ”€â”€ GET /profile â†’ ProfileController@show
    â”‚   â”œâ”€â”€ GET /profile/edit â†’ ProfileController@edit
    â”‚   â”œâ”€â”€ PUT /profile/update â†’ ProfileController@update
    â”‚   â”œâ”€â”€ GET /profile/password â†’ ProfileController@password
    â”‚   â””â”€â”€ PUT /profile/password/update â†’ ProfileController@updatePassword
    â”‚
    â”œâ”€â”€ [Admins - Super Admin Only]
    â”‚   â”œâ”€â”€ GET /admins â†’ AdminsController@index
    â”‚   â”œâ”€â”€ GET /admins/create â†’ AdminsController@create
    â”‚   â”œâ”€â”€ POST /admins â†’ AdminsController@store
    â”‚   â”œâ”€â”€ GET /admins/{admin}/edit â†’ AdminsController@edit
    â”‚   â”œâ”€â”€ PUT /admins/{admin} â†’ AdminsController@update
    â”‚   â”œâ”€â”€ POST /admins/{admin}/deactivate â†’ AdminsController@deactivate
    â”‚   â”œâ”€â”€ POST /admins/{admin}/activate â†’ AdminsController@activate
    â”‚   â””â”€â”€ DELETE /admins/{admin} â†’ AdminsController@destroy
    â”‚
    â””â”€â”€ [Dashboard]
        â””â”€â”€ GET /dashboard â†’ Show dashboard
```

---

## ğŸ¨ UI Stack

```
Blade Templates
â”œâ”€â”€ HTML Structure
â”‚   â””â”€â”€ Semantic HTML5
â”‚
â”œâ”€â”€ Styling
â”‚   â”œâ”€â”€ Tailwind CSS (Utility-first)
â”‚   â””â”€â”€ CSS Variables (Theme switching)
â”‚
â”œâ”€â”€ Interactivity
â”‚   â””â”€â”€ Alpine.js (Lightweight JS)
â”‚       â”œâ”€â”€ x-show (Conditionals)
â”‚       â”œâ”€â”€ @click (Events)
â”‚       â”œâ”€â”€ @submit (Form handling)
â”‚       â””â”€â”€ x-data (Component state)
â”‚
â””â”€â”€ Responsiveness
    â”œâ”€â”€ Mobile-first design
    â”œâ”€â”€ Breakpoints (md, lg, xl)
    â””â”€â”€ Responsive utilities
```

---

## ğŸ“Š Data Flow (Create Admin Example)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Super Admin visits  â”‚
â”‚ /admin/admins/createâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ GET
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminsController@create      â”‚
â”‚ authorize('create', Admin)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Pass
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ View: admins/create.blade    â”‚
â”‚ (Empty form)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ User fills form
          â”‚ Submits (POST)
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminsController@store       â”‚
â”‚ authorize('create', Admin)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Pass
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validate Input               â”‚
â”‚ AdminStoreRequest            â”‚
â”‚ (name, email, password, etc) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Valid?
          â”œâ”€â”€â”€ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                 â–¼
          â”‚        Return form with errors
          â”‚
          â”œâ”€â”€â”€ YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ AdminService@createAdmin()   â”‚
         â”‚                              â”‚
         â”‚ 1. Validate email unique     â”‚
         â”‚ 2. Hash password             â”‚
         â”‚ 3. Create Admin record       â”‚
         â”‚ 4. Return new Admin          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Admin created in DB          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Redirect to /admin/admins    â”‚
         â”‚ with success message         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ Summary

This architecture provides:

âœ… **Clean Separation of Concerns**
- Controllers handle HTTP
- Services handle business logic
- Models handle data

âœ… **Reusability**
- Services used by multiple controllers
- Middleware reused across routes
- Blade partials shared

âœ… **Security**
- Authorization via policies
- Validation via form requests
- CSRF on all forms

âœ… **Testability**
- Services can be tested independently
- Controllers can be mocked
- Factories for test data

âœ… **Scalability**
- Easy to add new features
- New routes just reference services
- New translations just add keys

---

Done! ğŸ‰
